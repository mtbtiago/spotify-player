/*! spotify-player 2015-02-13 */
"use strict";function createSongItem(item){var h3=createSong(item.album.name,item.artists[0].name);h3.id=item.id,h3.img=item.album.images[0],h3.preview_url=item.preview_url}function createSong(title,author){var li=document.createElement("li"),h3=document.createElement("h3");h3.innerHTML=title,h3.addEventListener("click",songClick);var h4=document.createElement("h4");return h4.innerHTML=author,song_list.appendChild(li),li.appendChild(h3),li.appendChild(h4),h3}function ajax(url,data,callback){var xhr=new XMLHttpRequest;xhr.open("GET",url),xhr.send(data),xhr.onload=function(event){var response=JSON.parse(event.target.response);callback(response)}}function songClick(){if(this.id){document.querySelector("#playing_tab").click(),document.querySelector("#album_img").src=this.img.url;var audio=document.querySelector("#audio");audio.src=this.preview_url,audio.play()}}var song_list=document.querySelector("#song_list");document.querySelector("#search_form").addEventListener("submit",function(event){event.preventDefault();for(var search_text=document.querySelector("#search_text"),URL="https://api.spotify.com/v1/search?q=",url=URL+'"'+search_text.value+'"&type=track';song_list.firstChild;)song_list.removeChild(song_list.firstChild);document.querySelector("#search_tab").click(),ajax(url,{},function(response){try{console.log(response),0===response.tracks.items.length?createSong("No songs found!",""):response.tracks.items.forEach(function(item){createSongItem(item)})}catch(e){createSong("Error getting albums",e)}})});